(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["guessMain"],{"18d8":function(e,t,a){"use strict";a("c429")},b2fe:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.isEnter?"show":"",attrs:{id:"guessMain"}},[a("div",{staticClass:"cHeader"},[a("div",{staticClass:"left",on:{click:function(t){e.showSidePage=!e.showSidePage,e.isShowHideMenu=!1,e.showTopMenu=!1}}},[a("icon-svg",{attrs:{iconClass:"zhankai_1"}}),Object.keys(e.nowGameConfig).length?a("span",{staticClass:"title ellipsis"},[e._v(e._s(e.$t(e.nowGame.alias)))]):e._e()],1),a("div",{staticClass:"right"},[a("span",{staticClass:"dot",on:{click:function(t){e.showTopMenu=!e.showTopMenu}}},e._l(3,(function(e,t){return a("b",{key:t,staticClass:"b"})})),0),a("span",{staticClass:"line"}),a("icon-svg",{staticStyle:{fill:"#fff !important"},attrs:{iconClass:"close"},nativeOn:{click:function(t){return e.closePage.apply(null,arguments)}}})],1)]),Object.keys(e.nowGameConfig).length?[e.nowGame.gameName==e.specialGameName.lk1u?a("OneU"):e.nowGame.gameName==e.specialGameName.crash?a("plan"):a("block")]:e._e(),a("div",{staticClass:"sidePage",class:e.showSidePage?"showSidePage":""},[e.showSidePage?a("div",{staticClass:"mask",on:{click:function(t){e.showSidePage=!1}}}):e._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"side_header"},[a("span",[e._v(e._s(e.$t("version4.game")))]),a("icon-svg",{attrs:{iconClass:"zhankai_2"},nativeOn:{click:function(t){e.showSidePage=!1}}})],1),a("div",{staticClass:"side_contentd"},[a("div",{staticClass:"side_content"},[e._l(e.$store.state.gameInfo,(function(t,n){return[0!=+t.status?a("div",{key:n,staticClass:"gameItem ",on:{click:function(a){return e.changeGame(t)}}},[a("span",{staticClass:"gameName ellipsis"},[e._v(e._s(e.$t(t.alias)))]),a("b",{staticClass:"arrowRight"})]):e._e()]}))],2)])])]),e.showTopMenu?a("div",{staticClass:"topBox"},[a("b",{staticClass:"topAngle",style:"vi"==e.$store.state.lang?"left:68%;":"left:50%"}),a("div",{staticClass:"itemBox"},[a("div",{staticClass:"item",on:{click:e.jumpCharge}},[a("icon-svg",{attrs:{iconClass:"recharge"}}),e._v(" "+e._s(e.$t("homePage.charge"))+" ")],1),a("div",{staticClass:"item",on:{click:e.jumpRecord}},[a("icon-svg",{attrs:{iconClass:"record"}}),e._v(" "+e._s(e.$t("version3.gameRecord"))+" ")],1),a("div",{staticClass:"item",on:{click:e.jumpRule}},[a("icon-svg",{attrs:{iconClass:"rule"}}),e._v(" "+e._s(e.$t("user.guizeshuoming"))+" ")],1)])]):e._e(),e.showTopMenu?a("div",{staticClass:"mask mask_top",on:{click:function(t){e.showTopMenu=!1}}}):e._e(),e.zendesk?a("custom"):e._e()],2)},o=[],s=a("5530"),i=(a("7db0"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("b0c0"),a("00b4"),a("d81d"),a("3ca3"),a("ddb0"),{data:function(){return{showSidePage:!1,showTopMenu:!1,isEnter:!1,t:null,nowGame:{},zendesk:!1,refreshTimes:0}},methods:{jumpCharge:function(){this.$router.push({path:"/charge/chooseChannel"})},jumpRecord:function(){this.$router.push({path:"/gameRecord",query:{name:this.nowGame.gameName}})},jumpRule:function(){var e=this;this.$router.push({path:"/helpDetail",query:{id:this.$store.state.gameInfo.find((function(t){return t.gameName==e.nowGame.gameName})).documentId}})},resize:function(){var e=document.getElementById("guessMain");e.style.height=window.innerHeight+"px"},changeGame:function(e){if(this.showSidePage=!1,e.gameName!=this.nowGame.gameName)if(1!=e.status){if(this.cancelLoading(),this.$emit("clearLastGame"),this.$store.commit("setNowGame",e),this.$store.commit("clearGameConfig",{}),this.nowGame.gameName==this.specialGameName.crash){var t=document.getElementById("iframe");t&&t.contentWindow.leaveGame()}var a={gameName:e.gameName};this.$route.query.returnUrl&&(a.returnUrl=this.$route.query.returnUrl),this.$router.replace({path:"/game/guessMain",query:a})}else this.toast(this.$t("version3.maintain"))},closePage:function(){var e=this;this.isEnter=!1,setTimeout((function(){var t,a;null!==(t=e.$store.state.moduleEntryPath)&&void 0!==t&&t[e.$route.path]?e.$router.replace(null===(a=e.$store.state.moduleEntryPath)||void 0===a?void 0:a[e.$route.path]):e.$router.replace(e.$route.query.returnUrl||"/gameList")}),10)},doRefreshGameConfig:function(){var e=this;if(this.refreshTimes>=3)this.showModal({message:this.$t("common.T404"),cancel:!0,cancelTxt:"Exit",okTxt:"OK",cancelCb:function(){e.closePage()}});else{var t=setTimeout((function(){e.refreshTimes++,e.getGameConfig()}),3e3);this.$once("hook:beforeDestroy",(function(){clearTimeout(t),t=null}))}},getGameConfig:function(e){var t=this;this.loading();var a={gameName:this.nowGame.gameName};this.$api(this.api.game.getBetConfig,a,"GET").then((function(a){if(t.cancelLoading(),200==a.code&&a.data){if(0==+a.data.info.status)return void t.toast(t.$t("version22.gameClosed"));if(t.$store.commit("setDiff",(new Date).getTime()-a.data.timestamp),t.nowGame.gameName!=t.specialGameName.lk1u&&t.nowGame.gameName!=t.specialGameName.crash&&a.data.info.options&&t.nowGame.time){if(a.data.info.options[0]&&a.data.info.options[0].nextOptions&&a.data.info.options[0].nextOptions.length){var n,o={curTopMode:"",curSecondBetMode:""},i=a.data.info.options[0];if(i.value&&(o.curTopMode=i.value),i.nextOptions[0].value&&null!==(n=i.nextOptions[0])&&void 0!==n&&n.nextOptions&&i.nextOptions[0].nextOptions.length&&(o.curSecondBetMode=i.nextOptions[0].value),t.nowGame.isTreeStruc){var c={};a.data.info.options.forEach((function(e){e.nextOptions&&e.nextOptions[0].nextOptions.length&&(c[e.value]=e.nextOptions[0].value)})),o=Object(s["a"])(Object(s["a"])({},o),c)}t.$store.commit("setGameStruc",{gameStruc:o})}var l={},r={},m={},u=t,g=[],f=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;if(null!==t&&void 0!==t&&t.nextOptions&&t.nextOptions.length||null!==t&&void 0!==t&&t.options&&t.options.length){var l=(null===t||void 0===t?void 0:t.options)||(null===t||void 0===t?void 0:t.nextOptions);l.forEach((function(t,i){var r;t.isSel=!1,t.name=u.util.transGameBetOptionName(u.nowGame.gameName,t.value,u);var m=n?n+"-"+t.name:t.name,g=!!(null!==t&&void 0!==t&&t.options&&t.options.length||null!==t&&void 0!==t&&t.nextOptions&&t.nextOptions.length);o[t.value]=!!g&&{},s[t.value]={isSel:!(!g||0!=i),name:t.name,value:t.value,multi:t.multi,nameAlias:m,isHasNext:g&&!(null===(r=t.nextOptions[0])||void 0===r||!r.nextOptions||!t.nextOptions[0].nextOptions.length)};var f=a;g&&(f=a?a+"/"+t.value:t.value,c=i),g?(s[t.value].options={},s[t.value].path=f,e(t,f,m,o[t.value],s[t.value].options,l,c)):e(t,f,m,o[t.value],s[t.value],l,c)}))}else a?m[a+"-"+(/\//.test(a)?c:0)]=i:m=i,t.__path=a,t.__name=n};try{f(a.data.info,"","",l,r,a.data.info.options,0)}catch(d){console.log(d,"Init Bet Option Fail")}t.$store.commit("setBetData",l),t.$store.commit("setSkeloton",r),t.$store.commit("setBetPanel",m),t.$store.commit("setCurSelPath",g)}t.$store.commit("setGameConfig",a.data),e&&e()}else a.msg&&t.toast(a.msg)})).catch((function(e){var a;null!==e&&void 0!==e&&e.response&&null!==(a=e.response)&&void 0!==a&&a.data&&400==e.response.data.code&&(t.nowGame.gameName==t.specialGameName.crash?t.doRefreshGameConfig():t.$store.commit("changeGameStatus",t.$store.state.specialGameName.crash))}))}},created:function(){var e=this,t=this.$route.query.gameName,a={},n={state:{gameConfig:{},nowGame:"",isLoadPlanResourceComplete:!1,diffServer:null},mutations:{setDiff:function(e,t){e.diffServer=t},clearGameConfig:function(e){e.gameConfig={}},setGameConfigOption:function(e,t){e.gameConfig.info.options=t},setGameConfig:function(e,t){var a,n,o;e.gameConfig=Object.assign({},e.gameConfig,t),e.nowGame.isGuessStruc&&e.gameConfig.myInfo&&e.gameConfig.myInfo.options&&e.gameConfig.myInfo.options.map&&(e.gameConfig.info.options=e.gameConfig.myInfo.options.map);var s=(null===(a=e.gameConfig)||void 0===a?void 0:a.lastIssue)&&(null===(n=e.gameConfig.lastIssue)||void 0===n?void 0:n.resultVal)&&(null===(o=e.gameConfig.lastIssue.resultVal)||void 0===o?void 0:o.value);s&&(e.gameConfig.lastIssue.resultVal.value=e.gameConfig.lastIssue.resultVal.value.replace(/(\w{2})\w+(\w{4})/g,"$1...$2"))},setGameStruc:function(e,t){e.nowGame=Object(s["a"])(Object(s["a"])({},e.nowGame),t)},setNowGame:function(e,t){console.log("设置新游戏"),e.nowGame=Object(s["a"])(Object(s["a"])({},t),{skelotonObj:{},betPanelObj:{},curSelPath:[],gameStruc:{}})},setActivePath:function(e,t){e.nowGame.curSelPath[t.index]=t.dataItem.value},setBetPanel:function(e,t){e.nowGame.betPanelObj=t},setCurSelPath:function(e,t){e.nowGame.curSelPath=t},setSkeloton:function(e,t){e.nowGame.skelotonObj=t},setBetData:function(e,t){console.log(t,"payload"),e.nowGame.betData=Object(s["a"])({},t)},setSecondMode:function(e,t){e.nowGame.curSelPath[1]=t.value,e.nowGame.gameStruc[t.topItem.value]=t.secondItem.value,e.nowGame.gameStruc.curSecondBetMode=t.secondItem.value},setTopMode:function(e,t){e.nowGame.curSelPath=[t.value],e.nowGame.gameStruc.curTopMode=t.value,e.nowGame.gameStruc.curSecondBetMode=e.nowGame.gameStruc[t.value]},clearUserBet:function(e){if(e.nowGame.isGuessStruc)e.gameConfig.info.options.forEach((function(e){e.forEach((function(e){e.isFoggy=!0}))}));else if(e.nowGame.isTreeStruc||e.nowGame.lotStruc)for(var t in e.nowGame.betPanelObj){var a=e.nowGame.betPanelObj[t];a.forEach((function(e){e.isSel=!1}))}else e.gameConfig.info.options.forEach((function(e){e.isSel=!1}))}}};!store.state.hasOwnProperty("yx")&&store.registerModule("yx",n),this.t=setInterval((function(){if(store.state.gameInfo.length){clearInterval(e.t),e.t=null;for(var n=!0,o=0;o<store.state.gameInfo.length;o++)if(0!=+store.state.gameInfo[o].status){n=!1;break}if(n)return e.toast("Under maintenance"),void setTimeout((function(){e.$router.replace("/Home")}),1500);if(e.$route.query.gameName){if(a=store.state.gameInfo.find((function(e){return e.gameName==t})),!a)return void e.$router.replace(e.$route.fullPath.replace(/(gameName=)\w+(&)/,"$1".concat(store.state.gameInfo[0].gameName,"$2")))}else a=store.state.gameInfo[0];e.nowGame=a,e.$store.commit("setNowGame",a),e.getGameConfig()}}),100)},mounted:function(){var e=this;document.body.addEventListener("focusout",(function(){document.documentElement.scrollTop=0})),document.addEventListener("visibilitychange",this.togglePage),setTimeout((function(){e.isEnter=!0}),10)},components:{plan:function(){return Promise.all([a.e("chunk-2d0c0279"),a.e("chunk-eacbc5a8"),a.e("crash")]).then(a.bind(null,"290d"))},block:function(){return Promise.all([a.e("chunk-2d0c0279"),a.e("chunk-462bdbb2"),a.e("chunk-2c701184")]).then(a.bind(null,"7983"))},OneU:function(){return Promise.all([a.e("chunk-2d0c0279"),a.e("1uDetail"),a.e("1uIndex")]).then(a.bind(null,"5777"))},custom:function(){return a.e("chunk-ab6f0896").then(a.bind(null,"a76e"))}},beforeDestroy:function(){this.t&&clearInterval(this.t),this.$store.unregisterModule("yx")},watch:{$route:function(e,t){var a=this;e!=t&&(store.state["axiosPromiseCancel"].length>0&&store.state["axiosPromiseCancel"].forEach((function(e){e&&e.f()})),store.state["axiosPromiseCancel"]=[],t.query.gameName==this.specialGameName.crash&&this.$emit("closeWebSocket"),this.nowGame=store.state.gameInfo.find((function(e){return e.gameName==a.$route.query.gameName})),console.log("watch",this.nowGame.gameName),this.$store.commit("setNowGame",this.nowGame),this.getGameConfig())}},computed:{specialGameName:function(){return this.$store.state.specialGameName},nowGameConfig:function(){return this.$store.state.yx.gameConfig}}}),c=i,l=(a("18d8"),a("2877")),r=Object(l["a"])(c,n,o,!1,null,"2d357718",null);t["default"]=r.exports},c429:function(e,t,a){}}]);